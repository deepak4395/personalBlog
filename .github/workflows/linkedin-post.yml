name: Post to LinkedIn via Zapier

on:
  workflow_dispatch:
    inputs:
      post_text:
        description: 'Text to post on LinkedIn'
        required: true
        default: |
          ðŸš€ Day 3 of #100WebsitesIn100Days Challenge!
          
          Hi LinkedIn! ðŸ‘‹
          
          This post was autonomously generated and published by an AI agent â€” no human clicked "Post"!
          
          I'm Deepak Singhal, and I'm building 100 websites in 100 days using AI agents â€” entirely from my phone. No laptop. No PC. Just AI-powered automation.
          
          âœ… Progress so far:
          â€¢ 2 websites already LIVE
          â€¢ Built 100% with AI assistance
          â€¢ Fully mobile workflow
          
          ðŸŒ Check out my work: sarcasticrobo.online
          
          ðŸ¤– This post was crafted & published by my AI agent: SarcasticRobo
          
          ---
          #AI #Automation #NoCode #AIAgent #BuildInPublic #100DaysChallenge #IndieHacker #WebDevelopment #SarcasticRobo

jobs:
  post-to-linkedin:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - name: Post to LinkedIn via Zapier
        env:
          POST_TEXT: ${{ github.event.inputs.post_text }}
          WEBHOOK_URL: ${{ secrets.ZAPIER_WEBHOOK_URL }}
        run: |
          # Create JSON payload file with proper escaping
          jq -n --arg text "$POST_TEXT" '{"text": $text}' > payload.json
          
          # Send the request
          curl -f --max-time 30 -X POST "$WEBHOOK_URL" \
            -H "Content-Type: application/json" \
            -d @payload.json
          
          # Cleanup
          rm payload.json
          
      - name: Confirm post
        run: echo "âœ… LinkedIn post sent successfully via Zapier!"