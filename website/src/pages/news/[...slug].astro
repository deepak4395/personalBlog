---
import { getCollection } from 'astro:content';
import type { GetStaticPaths } from 'astro';
import BlogPost from '../../layouts/BlogPost.astro';

export const getStaticPaths = (async () => {
  const newsEntries = await getCollection('news');
  return newsEntries.map((entry) => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}) satisfies GetStaticPaths;

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<BlogPost {...entry.data}>
  <Content />
  
  {entry.data.sources && entry.data.sources.length > 0 && (
    <div class="mt-8 p-4 bg-gray-100 dark:bg-gray-800 rounded-lg">
      <h3 class="text-lg font-semibold mb-2">Sources:</h3>
      <ul class="list-disc list-inside space-y-1">
        {entry.data.sources.map((source) => (
          <li>
            <a 
              href={source.url} 
              target="_blank" 
              rel="noopener noreferrer"
              class="text-primary-600 dark:text-primary-400 hover:underline"
            >
              {source.title} - {source.site}
            </a>
          </li>
        ))}
      </ul>
    </div>
  )}
</BlogPost>
