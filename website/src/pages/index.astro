---
import Layout from '../layouts/Layout.astro';
import BlogFilter from '../components/BlogFilter';
import { getCollection } from 'astro:content';

const base = import.meta.env.BASE_URL;

// Get all posts from all collections and combine them
const news = await getCollection('news');
const tutorials = await getCollection('tutorials');
const gita = await getCollection('bhagavad-gita');

// Combine and sort all posts by date (newest first)
const allPosts = [...news, ...tutorials, ...gita].sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<Layout title="Embedded Systems Blog - AI-Powered Content">
  <div class="text-center mb-12">
    <h1 class="text-5xl font-bold text-gray-900 dark:text-white mb-4">
      Embedded Systems Blog
    </h1>
    <p class="text-xl text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">
      AI-curated news, tutorials, and insights for embedded systems developers
    </p>
  </div>

  <BlogFilter posts={allPosts} base={base} client:load />
</Layout>
